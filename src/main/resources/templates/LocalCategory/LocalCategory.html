<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>방방곡곡 :: 로컬 카테고리</title>

</head>

<body>
<div id="#header-content">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/css/reset.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!-- fontawesone -->
    <script src="https://kit.fontawesome.com/4c3f1790ae.js" crossorigin="anonymous"></script>
</div>



<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>


<div th:include="layout/header :: #header"></div>

    <div class="local_category content_box">
        <div class="local_menu">
            <ul class="accordion">
                <li class="accordion-item"><p class="title">지역</p></li>
                <li><p class="button">서울</p></li>
                <li><p class="button">경기</p></li>
                <li><p class="button">인천</p></li>
                <li><p class="button">부산</p></li>
            </ul>
        </div>
        <div class="section">
            <div class="page_filter">
                <select class="filter_box" id="filter_box" onchange="selectBoxChange()" name="filter">
                    <option value="1" th:selected="${option == '1'}">최신순</option>
                    <option value="2" th:selected="${option == '2'}">조회순</option>
                    <option value="3" th:selected="${option == '3'}">좋아요순</option>
                </select>
            </div>
            <div class="page_list">
                <div class="page" th:each="a : ${list}">
                    <img src="/img/store_photo.png" alt="음식점 안내 사진">
                    <dl>
                        <dt th:text="${a.title}"></dt>
                        <dd class="description">open 3p.m / close 11 p.m</dd>
                        <dd class="rating">별별별별별 5.0(평가수)</dd>
                    </dl>
                </div>
            </div>



            <div class="page_swap">
                <div class="swap_button">
                    <ul><!-- 이전 링크 활성화 비활성화 -->
                        <li><a th:if="${!list.first}" th:href="@{/board/list(page = ${nowPage -2}, searchKeyword = ${param.searchKeyword}, option=${param.option})}">&#x3C;</a></li>
                        <li><a th:if="${list.first}" th:href="@{#}">&#x3C;</a></li>

                        <!-- 페이지 처리 -->
                        <th:block th:each="page : ${#numbers.sequence(startPage, endPage)}">
                            <li><a th:if="${page != nowPage}" th:href="@{/board/list(page =  ${page - 1}, searchKeyword = ${param.searchKeyword}, option=${param.option})}" th:text="${page}"></a></li>
                            <li><a th:if="${page == nowPage}" th:text="${page}" class="act"></a></li>
                        </th:block>

                        <!-- 다음 링크 활성화 비활성화 -->
                        <li><a th:if="${!list.last}" th:href="@{/board/list(page = ${nowPage}, searchKeyword = ${param.searchKeyword}, option=${param.option})}">&#x3E;</a></li>
                        <li><a th:if="${list.last}" th:href="@{#}">&#x3E;</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<div th:include="layout/footer :: #footer"></div>


<script>

    function selectBoxChange(){
        // option 값
        var project_title = document.querySelector('#filter_box');
        var select_project_title = project_title.value;
        // var selectedOption = project_title.options[project_title.selectedIndex].textContent;
        // console.log(selectedOption)
        // $("#filter_box").val(select_project_title).prop("selected", true);

        $.ajax({
            type: "get",
            url: "/board/list",
            data : {"option" : select_project_title } ,
            success: function(response) {
                // console.log(select_project_title)

                var newContent = $(response).find('.page_list');
                $('.page_list').html(newContent);
                var newContent2 = $(response).find('.page_swap');
                $('.page_swap').html(newContent2);

            },
            error: function(xhr, status, error) {
                console.log(error);
            }
        });



    }


</script>



</body>

</html>