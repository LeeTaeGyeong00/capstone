<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>방방곡곡 :: 로컬 카테고리</title>

</head>

<body>
<div id="#header-content">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/css/reset.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!-- fontawesone -->
    <script src="https://kit.fontawesome.com/4c3f1790ae.js" crossorigin="anonymous"></script>
</div>



<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>


<div th:include="layout/header :: #header"></div>

    <div class="local_category content_box">
        <div class="local_menu">
            <ul>
                <li><p class="title">지역</p></li>
                <li class="accordion_item">
                    <div class="accordion_title">서울</div>
                    <ul class="accordion_content">
                        <li><a href="">강남구</a></li>
                        <li><a href="">관악구</a></li>
                        <li><a href="">마포구</a></li>
                        <li><a href="">강복구</a></li>
                        <li><a href="">동작구</a></li>
                        <li><a href="">영등포구</a></li>
                        <li><a href="">금천구</a></li>
                    </ul>
                </li>
                <li class="accordion_item">
                    <div class="accordion_title">경기</div>
                    <ul class="accordion_content">
                        <li><a href="">수원시</a></li>
                        <li><a href="">과천시</a></li>
                        <li><a href="">광명시</a></li>
                        <li><a href="">시흥시</a></li>
                        <li><a href="">부천시</a></li>
                        <li><a href="">안양시</a></li>
                        <li><a href="">의정부시</a></li>
                    </ul>
                </li>
                <li class="accordion_item">
                    <div class="accordion_title">인천</div>
                    <ul class="accordion_content">
                        <li><a href="">연수구</a></li>
                        <li><a href="">남동구</a></li>
                        <li><a href="">부평구</a></li>
                        <li><a href="">계양구</a></li>
                        <li><a href="">서구</a></li>
                        <li><a href="">강화군</a></li>
                        <li><a href="">옹진군</a></li>
                    </ul>
                </li>
                <li class="accordion_item">
                    <div class="accordion_title">부산</div>
                    <ul class="accordion_content">
                        <li><a href="">영도구</a></li>
                        <li><a href="">부산진구</a></li>
                        <li><a href="">동래구</a></li>
                        <li><a href="">해운대구</a></li>
                        <li><a href="">금정구</a></li>
                        <li><a href="">강서구</a></li>
                        <li><a href="">연제구</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="section">
            <div class="page_filter">
                <select class="filter_box" id="filter_box" onchange="selectBoxChange()" name="filter">
                    <option value="1" th:selected="${option == '1'}">최신순</option>
                    <option value="2" th:selected="${option == '2'}">조회순</option>
                    <option value="3" th:selected="${option == '3'}">좋아요순</option>
                </select>
            </div>
            <div class="page_list">
                <div class="page" th:each="a : ${list}">
                    <img src="/img/store_photo.png" alt="음식점 안내 사진">
                    <dl>
                        <dt th:text="${a.title}"></dt>
                        <dd class="description">open 3p.m / close 11 p.m</dd>
                        <dd class="rating">별별별별별 5.0(평가수)</dd>
                    </dl>
                </div>
            </div>



            <div class="page_swap">
                <div class="swap_button">
                    <ul><!-- 이전 링크 활성화 비활성화 -->
                        <li><a th:if="${!list.first}" th:href="@{/board/list(page = ${nowPage -2}, searchKeyword = ${param.searchKeyword}, option=${param.option})}">&#x3C;</a></li>
                        <li><a th:if="${list.first}" th:href="@{#}">&#x3C;</a></li>

                        <!-- 페이지 처리 -->
                        <th:block th:each="page : ${#numbers.sequence(startPage, endPage)}">
                            <li><a th:if="${page != nowPage}" th:href="@{/board/list(page =  ${page - 1}, searchKeyword = ${param.searchKeyword}, option=${param.option})}" th:text="${page}"></a></li>
                            <li><a th:if="${page == nowPage}" th:text="${page}" class="act"></a></li>
                        </th:block>

                        <!-- 다음 링크 활성화 비활성화 -->
                        <li><a th:if="${!list.last}" th:href="@{/board/list(page = ${nowPage}, searchKeyword = ${param.searchKeyword}, option=${param.option})}">&#x3E;</a></li>
                        <li><a th:if="${list.last}" th:href="@{#}">&#x3E;</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<div th:include="layout/footer :: #footer"></div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const accordionItems = document.querySelectorAll(".accordion_item");

        accordionItems.forEach(item => {
            const title = item.querySelector(".accordion_title");
            const content = item.querySelector(".accordion_content");

            title.addEventListener("click", function() {
                const isOpen = item.classList.toggle("open");
                content.style.maxHeight = isOpen ? content.scrollHeight + "px" : 0;

                if (isOpen) {
                    title.style.background = "#FFCD6D";
                    title.style.color = "#FFFFFF";
                    title.style.borderBottom = "0.5px solid rgba(0,0,0,0)";
                    title.style.borderRight = "0.5px solid rgba(0,0,0,0)";
                    title.style.borderLeft = "0.5px solid rgba(0,0,0,0)";
                    content.style.borderBottom = "0.5px solid rgba(69, 89, 91, 0.25)";
                    content.style.borderRight = "0.5px solid rgba(69, 89, 91, 0.25)";
                    content.style.borderLeft = "0.5px solid rgba(69, 89, 91, 0.25)";
                } else {
                    title.style.background = ""; // 원래 배경색으로 변경
                    title.style.color = "#000000"; // 원래 글자색으로 변경
                    title.style.borderBottom = "0.5px solid rgba(69, 89, 91, 0.25)";
                    title.style.borderRight = "0.5px solid rgba(69, 89, 91, 0.25)";
                    title.style.borderLeft = "0.5px solid rgba(69, 89, 91, 0.25)";
                    content.style.borderBottom = "";
                    content.style.borderRight = "";
                    content.style.borderLeft = "";
                }

                // Close other sections if open
                accordionItems.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains("open")) {
                        otherItem.classList.remove("open");
                        otherItem.querySelector(".accordion_content").style.maxHeight = 0;
                        otherItem.querySelector(".accordion_title").style.background = "";
                        otherItem.querySelector(".accordion_title").style.color = "#000000";

                    }
                });
            });
        });
    });
</script>


<script>

    function selectBoxChange(){
        // option 값
        var project_title = document.querySelector('#filter_box');
        var select_project_title = project_title.value;


        $.ajax({
            type: "get",
            url: "/board/list",
            data : {"option" : select_project_title } ,
            success: function(response) {
                // console.log(select_project_title)

                var newContent = $(response).find('.page_list');
                $('.page_list').html(newContent);
                var newContent2 = $(response).find('.page_swap');
                $('.page_swap').html(newContent2);

            },
            error: function(xhr, status, error) {
                console.log(error);
            }
        });



    }


</script>



</body>

</html>